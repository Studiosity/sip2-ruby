language: ruby
sudo: required

rvm:
  - 2.1.10
  - 2.2.10
  - 2.3.7
  - 2.4.4
  - 2.5.1

before_install:
  - gem update bundler

install:
  - bundle install --jobs=3 --retry=3
  - gem install rubocop

script:
  - rubocop
  # Blackhole 127.0.0.2 for testing connection timeouts
  - sudo iptables -I INPUT -s 127.0.0.2 -j DROP
  - bundle exec rake
